# RISKS — Реестр рисков

L - вероятность, I - влияние

| RiskID | Описание | Связь (F/NFR) | L | I | Risk | Стратегия | Владелец | Срок | Критерий закрытия |
| :--- | :--- | :--- | :-: | :-: | :---: | :--- | :--- | :--- | :--- |
| R1 | Компрометация учетной записи пользователя путем автоматизированного подбора пароля (брутфорс). | F1, NFR-04 | 4 | 4 | 16 | Снизить | @MrStepWay | 2025.11 | Интеграционный тест, проверяющий возврат кода 429 после N неудачных попыток входа, добавлен в CI. |
| R2 | Утечка чувствительных данных (пароли, PII, токены) через журналы приложения (логи). | F6, NFR-05 | 4 | 4 | 16 | Снизить | @MrStepWay | 2025.11 | CI содержит юнит-тест для фильтра логгера. Ручной аудит логов в dev-окружении не выявил секретов. |
| R3 | Несанкционированный доступ к чужим данным (проектам, записям) из-за отсутствия проверки прав доступа. | F2, NFR-08 | 3 | 5 | 15 | Снизить | @MrStepWay | 2025.11 | CI содержит e2e-тесты, где пользователь 'A' безуспешно пытается получить/изменить/удалить ресурсы 'B' и получает ответ 404. |
| R4 | Отказ в обслуживании из-за большого количества запросов, исчерпывающих ресурсы сервера. | F2, NFR-01 | 4 | 3 | 12 | Снизить | @MrStepWay | 2025.11 | Нагрузочный тест подтверждает, что при превышении RPS API возвращает код 429. Контроль (middleware) реализован. |
| R5 | Длительный несанкционированный доступ к сессии пользователя при краже access-токена. | F2, NFR-07 | 3 | 4 | 12 | Снизить | @MrStepWay | 2025.11 | Интеграционный тест подтверждает, что API отклоняет запросы с истекшим токеном. TTL токена задокументирован. |
| R6 | Компрометация всей базы паролей пользователей в случае утечки БД из-за использования слабого алгоритма хеширования. | F4, NFR-03 | 2 | 5 | 10 | Снизить | @MrStepWay | 2025.11 | Code review подтвердил использование `argon2id`. Юнит-тест проверяет корректность хеширования и верификации. |
| R7 | Возможность нахождения логинов существующих пользователей в системе из-за различий в ответах API на неверный логин/пароль. | F1, NFR-02 | 3 | 3 | 9 | Снизить | @MrStepWay | 2025.11 | E2E-тесты подтверждают, что ответы сервера при запросе с неверным логином и неверным паролем идентичны. |
| R8 | Невозможность расследования инцидентов безопасности из-за отсутствия аудита действий пользователей с данными. | F4, NFR-06 | 4 | 2 | 8 | Снизить | @MrStepWay | 2025.11 | Схема БД содержит поля аудита (`owner_id`, `created_at`). Логирование ключевых событий реализовано. |

## Quick wins

- Риск R5: Изменение одного параметра в конфигурации функции генерации access token. Усилия минимальны, а эффект немедленный.
- Риск R6: Установка и настройка современной библиотеки для хеширования — это задача на несколько часов. При этом она полностью закрывает один из самых критических рисков — утечку паролей пользователей.
- Риск R7: Исправление требует изменения нескольких строк в эндпоинте аутентификации. Нужно просто убедиться, что и в случае "пользователь не найден", и в случае "неверный пароль" возвращается абсолютно идентичный ответ.
