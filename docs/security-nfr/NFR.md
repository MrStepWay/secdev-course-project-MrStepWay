# NFR

| ID | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет |
|---|---|---|---|---|---|---|
| NFR-01 | Производительность под нагрузкой | API должен оставаться отзывчивым при стандартной нагрузке | p95 времени ответа для эндпоинтов из групп projects и entries ≤ 350 мс при нагрузке 50 RPS. | нагрузочные тесты | api | Medium |
| NFR-02 | Маскирование причины при ошибках аутентификации | При ошибках входа приложение должно всегда возвращать одинаковое общее сообщение, не уточняя, в чём именно ошибка — в логине или пароле. | 100% ответов при ошибке аутентификации содержат общее сообщение | e2e-тесты, unit-тесты | auth | High |
| NFR-03 | Стойкость хеширования паролей | Пароли пользователей должны хешироваться с использованием стойкого к перебору алгоритма. | Алгоритм: argon2id Параметры: time_cost ≥ 3, memory_cost ≥ 64MiB, parallelism ≥ 2 | code review, unit-тесты | auth | High |
| NFR-04 | Брут-форс защита логина | Ограничить количество неуспешных попыток логина c одного IP за короткое время. | 5 неуспешных попыток за 1 минуту → блокировка (код 429) на 15 минут | интеграционный тест httpx/pytest | auth | Medium |
| NFR-05 | Маскирование чувствительных данных в логах | Любая чувствительная информация должна маскироваться перед записью в логи. | 0 экземпляров чувствительных данных или секретов в логах в открытом виде. | unit-тесты | observability | High |
| NFR-06 | Аудит событий аутентификации | Cобытия, связанные с аутентификацией, а в частности её безопасностью, должны логироваться. | 100% событий удачного и неудачного входа логируются | unit-тесты | auth, observability | Medium |
| NFR-07 | Короткоживущие сессии | Токены доступа должны иметь короткий срок жизни. | TTL для access token: 1 час с момента последней активности | интеграционные тесты | auth | High |
| NFR-08 | Изоляция данных пользователей | Аутентифицированный пользователь должен иметь доступ только к тем ресурсам, которые принадлежат ему. Попытка доступа к чужим данным по прямому URL должна блокироваться. | 0% успешных запросов к чужим ресурсам. | unit-тесты, e2e-тесты | api | High |
